(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,n){e.exports=n(289)},145:function(e,t,n){},170:function(e,t,n){},289:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(9),o=n.n(i),c=(n(141),n(143),n(145),n(114)),s=n(115),l=n(132),u=n(116),d=n(134),m=n(117),f=n.n(m),p=n(290),h=n(291),g=n(292),v=n(293),y=n(295),E=n(131),w=n(294),C=n(38),I=n(118),b=n(296),k=n(133),S="QRCodePro";function V(){var e=localStorage.getItem(S);try{return JSON.parse(e)}catch(t){return{}}}function L(e){var t="";t="object"==typeof e?JSON.stringify(e):e,localStorage.setItem(S,t)}var P={insert:function(e){var t=V()||{},n=t.list||[];n.unshift(e),t.list=n,L(t)},removeItemById:function(e){var t=V()||{},n=t.list||[],a=[];n.forEach(function(t,n){t.id!=e&&a.push(t)}),t.list=a,L(t)},getList:function(){return(V()||{}).list||[]},updateItemById:function(e,t){var n=V()||{},a=n.list||[];a=a.map(function(n){return n.id===e?Object(k.a)({},n,t):n}),n.list=a,L(n)}},R=(n(170),function(e){return e.filter(function(e){return e.id})}),O=(v.a.FormItem,function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={list:R(P.getList()),currentPageTitle:"",generateValue:""},e.editId="",e.onSave=function(){e.props.form.validateFields(function(t,n){if(!t)return e.editId?(P.updateItemById(e.editId,{name:n.name,href:n.url}),b.a.success("update success!"),e.editId=""):(P.insert({id:Date.now(),name:n.name,href:n.url}),b.a.success("create success!")),void e.asyncList();console.log(t)})},e.onVisibleChange=function(t,n,a){t&&e.createQRCode(document.querySelector("#_"+n),a,200,1)},e.onGenerate=function(){var t=e.props.form.getFieldValue("url");t&&e.createQRCode(e.refs.canvas,t)},e.renderLayer=function(e){return r.a.createElement("img",{id:"_"+e,width:"200",height:"200"})},e.onEdit=function(t,n){t.stopPropagation(),e.props.form.setFieldsValue({name:n.name,url:n.href}),e.editId=n.id},e.onDelete=function(t,n){t.stopPropagation(),P.removeItemById(n),b.a.success("delete success!"),e.asyncList()},e.onCopy=function(e,t){e.stopPropagation()},e.renderCell=function(t){var n=t.id,a=t.href,i=[r.a.createElement(w.a,{onVisibleChange:function(t){return e.onVisibleChange(t,n,a)},content:e.renderLayer(n),title:null,trigger:"hover"},r.a.createElement(C.a,{type:"qrcode",onClick:function(e){return e.stopPropagation()}})),r.a.createElement(I.CopyToClipboard,{text:a,onCopy:function(){return b.a.success("copy success!")}},r.a.createElement(C.a,{type:"copy",onClick:function(t){return e.onCopy(t,a)}})),r.a.createElement(C.a,{type:"edit",onClick:function(n){return e.onEdit(n,t)}}),r.a.createElement(C.a,{type:"delete",onClick:function(t){return e.onDelete(t,n)}})];return r.a.createElement(g.a.Item,{onClick:function(){return window.open(t.href)},actions:i},r.a.createElement("a",{className:"list-item",href:t.href},t.name))},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(window.chrome.tabs)window.chrome.tabs.getSelected(null,function(t){var n=t.url;e.createQRCode(e.refs.canvas,n),e.setState({currentPageTitle:t.title,generateValue:n})});else{var t=window.location.href;this.createQRCode(this.refs.canvas,t),this.setState({currentPageTitle:document.title,generateValue:t})}}},{key:"asyncList",value:function(){this.setState({list:R(P.getList())})}},{key:"createQRCode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;f.a.toDataURL(t,{width:n,height:n,margin:a},function(t,n){e.src=n})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"qrcode-wrap"},r.a.createElement(p.a,null,r.a.createElement(h.a,{span:10},r.a.createElement("img",{height:"200",width:"200",ref:"canvas"})),r.a.createElement(h.a,{span:14},e("name",{initialValue:this.state.currentPageTitle,rules:[{required:!0,message:"Require a name"}]})(r.a.createElement(y.a,{placeholder:"Name",autoComplete:"off"})),e("url",{initialValue:this.state.generateValue,rules:[{required:!0,message:"Require a content"}]})(r.a.createElement(y.a.TextArea,{style:{resize:"none",marginTop:"10px"},rows:5})),r.a.createElement(p.a,{style:{marginTop:"10px"},gutter:10},r.a.createElement(h.a,{span:12},r.a.createElement(E.a,{type:"primary",style:{width:"100%"},onClick:this.onGenerate},"Greate")),r.a.createElement(h.a,{span:12},r.a.createElement(E.a,{type:"primary",style:{width:"100%"},onClick:this.onSave},this.editId?"Update":"Save"))))),r.a.createElement(p.a,{className:"module"},r.a.createElement(h.a,{span:24},r.a.createElement(g.a,{size:"small",header:null,footer:null,bordered:!0,dataSource:this.state.list,renderItem:this.renderCell})))))}}]),t}(a.Component)),T=v.a.create()(O);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[136,2,1]]]);
//# sourceMappingURL=main.b176afb2.chunk.js.map